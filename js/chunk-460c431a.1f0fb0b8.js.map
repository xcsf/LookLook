{"version":3,"sources":["webpack:///./src/components/webgl/look3dTriangles.vue?e6f6","webpack:///./src/components/webgl/look3dTriangles.vue?54d1","webpack:///src/components/webgl/look3dTriangles.vue","webpack:///./src/components/webgl/look3dTriangles.vue?3e58","webpack:///./src/components/webgl/look3dTriangles.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","staticRenderFns","name","components","gCanvas","data","canvas","gl","a_Position","a_PointSize","u_FragColor","a_Color","u_ModelMatrix","u_ViewMatrix","vertexSizeBuffer","VSHADER_SOURCE","FSHADER_SOURCE","g_last","Date","now","speedX","speedY","speedAngle","curAngle","curX","curY","verticesSizeColor","Float32Array","modelMatrix","viewMatrix","curEyeX","curEyeY","curEyeZ","created","mounted","$refs","gcanvas","width","height","init","document","addEventListener","console","log","methods","getAttribLocation","program","getUniformLocation","clearColor","clear","COLOR_BUFFER_BIT","initVertexBuffers","tick","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","FSIZE","enableVertexAttribArray","rotatedGraphics","draw","requestAnimationFrame","uniformMatrix4fv","elements","drawArrays","POINTS","TRIANGLES","animate","setLookAt","setRotate","onkeydown","beforeDestroy","removeEventListener","onClick","component"],"mappings":"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","file":"js/chunk-460c431a.1f0fb0b8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./look3dTriangles.vue?vue&type=style&index=0&id=e904c3a6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./look3dTriangles.vue?vue&type=style&index=0&id=e904c3a6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('g-canvas',{ref:\"gcanvas\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrapper\">\r\n    <g-canvas ref=\"gcanvas\"></g-canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport gCanvas from \"./canvas\";\r\nimport { Matrix4 } from \"@/util/cuon-matrix.js\";\r\nexport default {\r\n  name: \"look3dTriangles\",\r\n  components: {\r\n    gCanvas\r\n  },\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      gl: null,\r\n      a_Position: null,\r\n      a_PointSize: null,\r\n      u_FragColor: null,\r\n      a_Color: null,\r\n      u_ModelMatrix: null,\r\n      u_ViewMatrix: null,\r\n      vertexSizeBuffer: null,\r\n      VSHADER_SOURCE:\r\n        \"attribute vec4 a_Position;\\n\" +\r\n        \"attribute float a_PointSize;\\n\" +\r\n        \"attribute vec4 a_Color;\\n\" +\r\n        \"varying vec4 v_Color;\\n\" + // varying variable\r\n        'uniform mat4 u_ViewMatrix;\\n' +\r\n        \"uniform mat4 u_ModelMatrix;\\n\" +\r\n        \"void main() {\\n\" +\r\n        \"  gl_Position = u_ViewMatrix * u_ModelMatrix * a_Position;\\n\" +\r\n        \"  gl_PointSize = a_PointSize;\\n\" +\r\n        \"  v_Color = a_Color;\\n\" + // Pass the data to the fragment shader\r\n        \"}\\n\",\r\n      FSHADER_SOURCE:\r\n        \"precision mediump float;\\n\" +\r\n        \"uniform vec4 u_FragColor;\\n\" +\r\n        \"varying vec4 v_Color;\\n\" + // Receive the data from the vertex shader\r\n        \"void main() {\\n\" +\r\n        \"  gl_FragColor = v_Color;\\n\" +\r\n        \"}\\n\",\r\n      g_last: Date.now(),\r\n      speedX: 10,\r\n      speedY: 10,\r\n      speedAngle: 90,\r\n      curAngle: 0.0,\r\n      curX: 0.0,\r\n      curY: 0.0,\r\n      verticesSizeColor: new Float32Array([\r\n        // Vertex coordinates and color(RGBA)\r\n        0.0,  0.5,  -0.4,  0.4,  1.0,  0.4, // The back green one\r\n        -0.5, -0.5,  -0.4,  0.4,  1.0,  0.4,\r\n        0.5, -0.5,  -0.4,  1.0,  0.4,  0.4, \r\n    \r\n        0.5,  0.4,  -0.2,  1.0,  0.4,  0.4, // The middle yellow one\r\n        -0.5,  0.4,  -0.2,  1.0,  1.0,  0.4,\r\n        0.0, -0.6,  -0.2,  1.0,  1.0,  0.4, \r\n\r\n        0.0,  0.5,   0.0,  0.4,  0.4,  1.0,  // The front blue one \r\n        -0.5, -0.5,   0.0,  0.4,  0.4,  1.0,\r\n        0.5, -0.5,   0.0,  1.0,  0.4,  0.4, \r\n      ]),\r\n      modelMatrix: new Matrix4(),\r\n      viewMatrix: new Matrix4(),\r\n      curEyeX: 0.20,\r\n      curEyeY: 0.25,\r\n      curEyeZ: 0.25\r\n    };\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.gl = this.$refs.gcanvas.gl;\r\n    this.canvas = this.$refs.gcanvas.canvas;\r\n    if (\r\n      !this.$refs.gcanvas.initShaders(\r\n        this.gl,\r\n        this.VSHADER_SOURCE,\r\n        this.FSHADER_SOURCE\r\n      )\r\n    ) {\r\n      console.log(\"Failed to intialize shaders.\");\r\n      return;\r\n    }\r\n    this.speedX = this.speedX / this.canvas.width;\r\n    this.speedY = this.speedY / this.canvas.height;\r\n    this.init(this.gl);\r\n    document.addEventListener(\"keydown\",this.onkeydown)\r\n  },\r\n  methods: {\r\n    init(gl) {\r\n      this.a_Position = gl.getAttribLocation(gl.program, \"a_Position\");\r\n      if (this.a_Position < 0) {\r\n        console.log(\"Failed to get the storage location of a_Position\");\r\n        return;\r\n      }\r\n      this.a_PointSize = gl.getAttribLocation(gl.program, \"a_PointSize\");\r\n      if (this.a_PointSize < 0) {\r\n        console.log(\"Failed to get the storage location of a_PointSize\");\r\n        return;\r\n      }\r\n    //   this.u_FragColor = gl.getUniformLocation(gl.program, \"u_FragColor\");\r\n    //   if (!this.u_FragColor) {\r\n    //     console.log(\"Failed to get the storage location of u_FragColor\");\r\n    //     return;\r\n    //   }\r\n      this.a_Color = gl.getAttribLocation(gl.program, \"a_Color\");\r\n      if (this.a_Color < 0) {\r\n        console.log(\"Failed to get the storage location of a_Color\");\r\n        return -1;\r\n      }\r\n      // Pass the rotation matrix to the vertex shader\r\n      this.u_ModelMatrix = gl.getUniformLocation(gl.program, \"u_ModelMatrix\");\r\n      this.u_ViewMatrix = gl.getUniformLocation(gl.program, 'u_ViewMatrix');\r\n      if (!this.u_ViewMatrix || !this.u_ModelMatrix) {\r\n        console.log(\"Failed to get the storage location of u_ModelMatrix\");\r\n        return;\r\n      }\r\n\r\n      gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n      // Clear the color buffer with specified clear color\r\n      gl.clear(gl.COLOR_BUFFER_BIT);\r\n      if (this.initVertexBuffers(gl) < 0) {\r\n        console.log(\"Failed to set the positions of the vertices\");\r\n        return;\r\n      }\r\n      this.tick();\r\n    },\r\n    initVertexBuffers(gl) {\r\n      this.vertexSizeBuffer = gl.createBuffer();\r\n      if (!this.vertexSizeBuffer) {\r\n        console.log(\"Failed to create the buffer object\");\r\n        return -1;\r\n      }\r\n      // Bind the buffer object to target\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexSizeBuffer);\r\n      // Write date into the buffer object\r\n      gl.bufferData(gl.ARRAY_BUFFER, this.verticesSizeColor, gl.STATIC_DRAW);\r\n\r\n      let FSIZE = this.verticesSizeColor.BYTES_PER_ELEMENT;\r\n      // Assign the buffer object to a_Position letiable\r\n      gl.vertexAttribPointer(this.a_Position, 3, gl.FLOAT, false, FSIZE * 6, 0);\r\n      // Enable the assignment to a_Position letiable\r\n      gl.enableVertexAttribArray(this.a_Position);\r\n\r\n    //   gl.vertexAttribPointer( this.a_PointSize, 1, gl.FLOAT, false, FSIZE * 6, FSIZE * 2 );\r\n    //   gl.enableVertexAttribArray(this.a_PointSize);\r\n      \r\n      gl.vertexAttribPointer( this.a_Color, 3, gl.FLOAT, false, FSIZE * 6, FSIZE * 3 );\r\n      gl.enableVertexAttribArray(this.a_Color);\r\n    },\r\n    tick(event) {\r\n      this.rotatedGraphics();\r\n      this.draw(); // Draw the triangle\r\n      requestAnimationFrame(this.tick, this.canvas); // Request that the browser calls tick\r\n    },\r\n    draw() {\r\n      this.gl.uniformMatrix4fv(this.u_ModelMatrix, false, this.modelMatrix.elements);\r\n      this.gl.uniformMatrix4fv(this.u_ViewMatrix, false, this.viewMatrix.elements);\r\n\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n      this.gl.drawArrays(this.gl.POINTS, 0, 9);\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 9);\r\n    },\r\n    // Last time that this function was called\r\n    animate(angle) {\r\n      // Calculate the elapsed time\r\n      let now = Date.now();\r\n      let elapsed = now - this.g_last;\r\n      this.g_last = now;\r\n      // Update the current rotation angle (adjusted by the elapsed time)\r\n      let newAngle = angle + (this.speedAngle * elapsed) / 1000.0;\r\n      return (newAngle %= 360);\r\n    },\r\n    rotatedGraphics() {\r\n      this.curAngle = this.animate(this.curAngle);\r\n      if (this.curX >= 0.5 || this.curX <= -0.5) {\r\n        // this.gl.uniform4fv(this.u_FragColor, [\r\n        //   Math.random(),\r\n        //   Math.random(),\r\n        //   Math.random(),\r\n        //   0.5\r\n        // ]);\r\n        this.speedX = -this.speedX;\r\n      }\r\n      if (this.curY >= 0.5 || this.curY <= -0.5) {\r\n        // this.gl.uniform4fv(this.u_FragColor, [\r\n        //   Math.random(),\r\n        //   Math.random(),\r\n        //   Math.random(),\r\n        //   0.5\r\n        // ]);\r\n        this.speedY = -this.speedY;\r\n      }\r\n      this.curX += this.speedX;\r\n      this.curY += this.speedY;\r\n      this.viewMatrix.setLookAt(this.curEyeX, this.curEyeY, this.curEyeZ, 0, 0, 0, 0, 1, 0);\r\n      // this.modelMatrix.setTranslate(this.curX, this.curY, 0); // Multiply modelMatrix by the calculated translation matrix\r\n      this.modelMatrix.setRotate(this.curAngle, 0, 0, 1); // Rotation angle, rotation axis (0, 0, 1)\r\n    },\r\n    onkeydown(e){\r\n      if(e.keyCode == 39) { // The right arrow key was pressed\r\n        this.curEyeX += 0.02;\r\n      } else \r\n      if (e.keyCode == 37) { // The left arrow key was pressed\r\n        this.curEyeX -= 0.02;\r\n      } else { return; }\r\n      }\r\n  },\r\n  beforeDestroy() {\r\n    this.canvas.removeEventListener(\"mousedown\", this.onClick);\r\n    document.removeEventListener(\"keydown\", this.onkeydown);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./look3dTriangles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./look3dTriangles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./look3dTriangles.vue?vue&type=template&id=e904c3a6&scoped=true&\"\nimport script from \"./look3dTriangles.vue?vue&type=script&lang=js&\"\nexport * from \"./look3dTriangles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./look3dTriangles.vue?vue&type=style&index=0&id=e904c3a6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e904c3a6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}